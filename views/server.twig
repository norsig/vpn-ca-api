# OpenVPN Server Configuration for {{ cn|e }}

dev tun

proto udp
#proto tcp-server

port 1194
#port 443

tls-server

# need to allow 7505 also with SELinux
#management localhost 7505

# IPv4
server 10.8.0.0 255.255.255.0
push "redirect-gateway def1 block-local"

# IPv6
#server-ipv6 2001:aaaa:bbbb:cccc::/64
#push "route-ipv6 2000::/3"

topology subnet
comp-lzo
persist-key
persist-tun
verb 3
max-clients 100
keepalive 30 60
user openvpn
group openvpn
key-direction 0

# crypto
auth SHA256
prng SHA256
cipher AES-256-CBC

# See RFC 7525 for TLS configuration recommendations
# OpenVPN does not support ECDHE (https://community.openvpn.net/openvpn/wiki/Hardening)
tls-version-min 1.2
tls-cipher TLS-DHE-RSA-WITH-AES-128-GCM-SHA256:TLS-DHE-RSA-WITH-AES-256-GCM-SHA384

script-security 1

# CRL, you MUST enable this in production, but first revoke a configuration
#crl-verify /etc/openvpn/ca.crl

# Use Google Public DNS by default
# https://developers.google.com/speed/public-dns/
push "dhcp-option DNS 8.8.8.8"
push "dhcp-option DNS 8.8.4.4"
#push "dhcp-option DNS 2001:4860:4860::8888"
#push "dhcp-otpion DNS 2001:4860:4860::8844"

push "dhcp-option DISABLE-NBT"

# also send a NTP server
#push "dhcp-option NTP time.example.org"

<ca>
{{ ca|e }}
</ca>
<cert>
{{ cert|e }}
</cert>
<key>
{{ key|e }}
</key>
<dh>
{{ dh|e }}
</dh>
<tls-auth>
{{ ta|e }}
</tls-auth>
